{% import "_includes/forms" as forms %}

{{ forms.autosuggestField({
    label: "Corp Id"|t('dingtalk'),
    required: true,
    id: "cropId",
    name: "corpId",
    value: settings.corpId,
    suggestEnvVars: true,
}) }}

{{ forms.autosuggestField({
    label: "Corp Secret"|t('dingtalk'),
    required: true,
    id: 'corpSecret',
    name: "corpSecret",
    value: settings.corpSecret,
    suggestEnvVars: true,
}) }}


<a class="btn icon settings"
   href="{{ url('settings/plugins/dingtalk/users') }}">{{ 'Users Settings'|t('dingtalk') }}</a>
<a class="btn icon settings" href="{{ url('dingtalk/robots') }}">{{ 'Robots Settings'|t('dingtalk') }}</a>
<a class="btn icon settings" href="{{ url('dingtalk/processes') }}">{{ 'Processes Settings'|t('dingtalk') }}</a>

{% js %}
    $corpSecretInput = $('#settings-corpSecret');
    new Craft.PasswordInput($corpSecretInput, {
        onToggleInput: $.proxy(function($newPasswordInput) {
            this.removeListener($corpSecretInput, 'textchange');
            $corpSecretInput = $newPasswordInput;
            this.addListener($corpSecretInput, 'textchange', 'validate');
        }, this)
    });
{% endjs %}